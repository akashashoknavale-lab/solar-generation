<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Login</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    font-family: Arial;
    background:#f2f2f2;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
}
.login-box{
    background:#fff;
    padding:20px;
    width:280px;
    box-shadow:0 0 10px rgba(0,0,0,0.2);
}
input,button{
    width:100%;
    padding:8px;
    margin-top:10px;
}
button{
    cursor:pointer;
}
</style>
</head>

<body>

<div class="login-box">
    <h3>Solar Dashboard Login</h3>
    <input type="text" id="username" placeholder="Username">
    <input type="password" id="password" placeholder="Password">
    <button onclick="login()">Login</button>
    <p id="msg" style="color:red"></p>
</div>

<script>
const LOGIN_SHEET_URL = "PASTE_YOUR_LOGIN_SHEET_JSON_URL_HERE";

async function login(){
    const u = username.value.trim();
    const p = password.value.trim();

    const res = await fetch(LOGIN_SHEET_URL);
    const data = await res.json();

    const user = data.find(r => r.username === u && r.password === p);

    if(!user){
        msg.innerText = "Invalid login";
        return;
    }

    localStorage.setItem("loggedIn","true");
    localStorage.setItem("role", user.role);          // admin / customer
    localStorage.setItem("plants", user.plants);      // ALL or P1,P2
    localStorage.setItem("user", user.username);

    window.location.href = "dashboard.html";
}
</script>

</body>
</html>
